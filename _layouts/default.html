<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">

    <head>
        <!-- Non social metatags -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover">
        <meta name="theme-color" content="#9200AA">

        <!-- <title> tage versus page title logic -->
        {%- if page.title -%}
            {%- if page.layout == 'home' -%}
                {%- assign page-title = site.title | escape -%}
                <title>{{ page-title | escape }}</title>
            {%- else -%}
                {%- assign page-title = page.title| escape -%}
                <title>{{ page-title | append: " - " | append: site.title | escape }}</title>
            {%- endif -%}
        {%- else -%}
            {%- assign page-title = site.title | escape -%}
            <title>{{ page-title | escape }}</title>
        {%- endif -%}

        {%- if site.gems contains "jekyll-seo-tag" -%}
            <!-- jekyll-seo-tag -->
        {%- else -%}
            {%- include social-metatags.html -%}
        {%- endif -%}

        <link rel="canonical" href="{{ page.url | replace:'index.html','' | absolute_url }}">

        {%- if site.gems contains "jekyll-feed" -%}
            <link rel="alternate" type="application/rss+xml" title="{{ site.title | escape }}" href="{{ "/feed.xml" | relative_url }}">
        {%- endif -%}

        <link rel="shortcut icon" href="{{ site.url }}/favicon.ico">
        <meta name="robots" content="noarchive">

        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    </head>

    <body class="{% if page.layout == 'home' %}bg{% endif %}">
        {%- if page.layout == 'home' -%}
            <!-- particles.js -->
            <div class="fullscreen" id="particles-js"></div>
            <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
            <script src="assets/js/app.js"></script>
        {%- else -%}
            {%- include mobile-nav.html -%}
        {%- endif -%}

        <section class="page-header {% if page.layout == 'home' %}home-page-header{% endif %}">
            <h1 class="project-name">{{ page-title }}</h1>  

            {%- if page.tagline -%}
                <h2 class="project-tagline"> {{ page.tagline }}</h2>
            {%- elsif page.description -%}
                <h2 class="project-tagline"> {{ page.description }}</h2>
            {%- endif -%}

            {%- if page.layout == 'post' -%}
            <!-- Post tagline -->
                <h2 class="project-date">
                <time datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished">
                    {%- assign date_format = site.cayman-    .date_format | default: "%b %-d, %Y" -%}
                    {{ page.date | date: date_format }}
                </time>
                {%- assign page_author = page.author | default: site.author | default: nil | escape -%}
                {%- if page_author -%}
                    â€¢ <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">{{ page_author }}</span></span>
                {%- endif -%}
                </h2>
            {%- endif -%}

            {%- if page.layout == 'post' or page.layout == 'project' -%}
            {%- else -%}
                <!-- navigation buttons for non-post and non-project pages -->
                {%- assign default_paths = site.pages | map: "path" -%}
                {%- assign page_paths = site.header_pages | default: default_paths -%}
                <div class="nav-btn {%- if page.layout == 'home' -%}home-page-nav{%- endif -%}">
                    {%- if page.layout == 'home' -%}
                        <a class="btn" href="/assets/static/resume.pdf">{{ 'Resume' | escape }}</a>
                    {%- else -%}
                        <a class="btn" href="{{ site.url }}">{{ 'Home' | escape }}</a>
                    {%- endif -%}
                    {%- for path in page_paths -%}
                        {%- assign my_page = site.pages | where: "path", path | first -%}
                        {%- if my_page.title -%}
                            {%- if my_page.title contains "404" or my_page.layout == 'home' -%}
                            {%- else -%}
                                <a class="btn" href="{{ my_page.url | relative_url }}">{{ my_page.title | escape }}</a>
                            {%- endif -%}
                        {%- endif -%}
                    {%- endfor -%}
                </div>
            {%- endif -%}

            {%- if page.layout == 'project' -%}
            <!-- nav buttons for project pages -->
                {%- assign project_repo = site.github.public_repositories | where: "name", page.github_name | first -%}
                <a class="btn" href="{{ project_repo.html_url }}">View on Github</a>
                <a class="btn" href="{{ site.url }}/projects">Back to Projects</a>
            {%- endif -%}

            {%- if page.layout == 'post' -%}
            <!-- nav buttons for post pages -->
                <a class="btn" href="{{ site.url }}/blog">Back to Blog</a>
            {%- endif -%}

            {%- if page.layout == 'home' -%}
            <!-- home-specific social media icons -->
                <br>
                <div class="home-icons">
                    {%- include social-icons.html -%}
                </div>
            {%- endif -%}
        </section>

        {%- if page.layout == 'home' -%}
        {%- else -%}
        <!-- only display content and footer if page is not home -->
            <section class="main-content">

                {{ content }}

                <footer class="site-footer">
                    {%- include social-icons.html -%}
                </footer>
            </section>
        {%- endif -%}

        {%- if site.google_analytics -%}
            <script type="text/javascript">
                !function(w,a,y,l,o,n){w.GoogleAnalyticsObject=y;w[y]||(w[y]=function(){
                (w[y].q=w[y].q||[]).push(arguments)});w[y].l=+new Date;o=a.createElement(l);
                n=a.getElementsByTagName(l)[0];o.src='//www.google-analytics.com/analytics.js';
                n.parentNode.insertBefore(o,n)}(window,document,'ga','script');

                ga('create', 'UA-XXXXX-X', 'auto');
                ga('send', 'pageview');
            </script>
        {%- endif -%}
    </body>
</html>
